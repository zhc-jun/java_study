# Git 命令

#### 1.基本命令

```shell
git init  //初始化，创建 git 仓库
git status //查看 git 状态 （文件是否进行了添加、提交操作）
git add test.txt //添加，将指定文件添加到暂存区 git add . 提交所有可提交的文件
git commit -m '提交时, 文字描述'  //提交，将暂存区文件提交到历史仓库
git log //查看日志（ git 提交的历史日志）

在企业中:  1.先查看status 状态, 找到要提交的文件；
          2.使用add 将文件添加到暂存区；多个文件空格隔开；
          3.使用commit命令提交到本地仓库；-m 描述最好是要有的，利于查看你提交的代码针对的是何种改动；
          4.最后进行push到我们的远程仓库, 好处: 便于我们远程备份；利于其他同事通过网络同步你的最新代码；
```

#### 2.版本切换

```shell
git reflog //查看所有分支的所有操作记录（包括已经被删除的commit 记录的操作） 2. 增加一次新的修改记录
git reset --hard 2345fd54（版本唯一索引值）//开始切换

在企业中: 版本切换是十分危险的, 越复杂的组织协同开发，该操作越要小心进行；往往因为版本冲突问题；我们很少将代码切换到某个版本；而是直接创建一个新的分支, 去进行代码的迭代；个人玩无所谓；
```

#### 3.分支管理

```shell
git branch 分支名     //创建命令
git checkout 分支名   //切换命令
ls //查看点前选中分支下的文件目录

git merge 分支名 //将其他分支合并到当前选中的分支
git branch -d 分支名 //删除分支
git branch //查看分支列表

在企业中: 分支是必须的，一般小公司或者小系统, 技术经理不会创建其他分支，只是用master默认的主分支；
         1.企业提倡敏捷开发, 利于代码的审查；工作效率报表呈现；出现问题时，追责到对应程序员等等；
         2.敏捷开发中, 针对bug或者task(新需求)都会基于master当前节点，创建其他分支用来迭代代码；
         3.在分支上修复bug或者新增新需求后，测试没有问题后，将分支合并到我们的master主线分支中,在进行全面测试；
         4.针对部分大公司复杂的组织结构，我们会继续基于各个部门去创建各自的分支，进行代码管理，这种设计更立竿见影；
         5.注意各个分支之间都是可以进行合并的，合并时注意代码是否存在冲突，否则合并不成功；
```

#### 4.远程仓库

* GitHub： 域名：https://github.com 介绍：GitHub是全球最大的开源项目托管平台，俗称大型程序员社区化交友网站 各类好玩有趣的开源项目，只有想不到，没有找不到。
*  码云： 域名：https://gitee.com 介绍：码云是全国最大的开源项目托管平台，良心平台，速度快，提供免费私有库
* 公司自行搭建: Gitlab(开源); 有能力的公司都会自己搭建自己公司的远程仓库，毕竟不是所有公司都想把代码交给云平台管理；

```shell
git remote add origin ssh地址活https地址  //添加一个远程仓库, 别名为 origin；
git remote -v 查看所有的远程仓库，没有 cangku 的话要先添加
git push -u 仓库名称 分支名 //将当前选中分支下的本地仓库代码推送到远程仓库

ssh 创建步骤:
 1. ssh-keygen -t rsa -C "937334241@qq.com" //生成命令 邮箱随意, 建议输入合法邮箱； –C “邮箱”  可以省略
 2. 继续敲3次回车
 3. cat ~/.ssh/id_rsa.pub //查看ssh 公钥命令
 4. 将公钥随机字符串, 粘贴复制到 远程仓库中；
 5. ssh -T git@github.com //进行测试

在企业中: 
         * ssh 可以实现免密登录或者提交代码, 他不是必须的；
         * 拥有远程仓库好处: 远程备份；协同开发；中央存储等；
         * 码云 GitHub GitLab这三个平台, 国内优先选择: 码云 GitLab, 国内外企会优先选择GitHub, 有条件的会自己搭建GitHub;
         * 无论那个远程仓库都有自己的web管理页面；需要自行去点一点页面玩一玩；加深印象；

```

#### 5.推荐创建项目仓库步骤

```shell
1. 在码云创建一个仓库后, 赋值仓库https 地址；
2. 在本地电脑打开 git 命令窗口;
3. 通过 git clone 仓库地址 将远程仓库代码下载到本地
4. 将我们的 "idea创建的project项目目录下" 所有代码文件或者文件夹, 粘贴复制到本地仓库.git 隐藏文件夹同级目录
5. add 命令添加到暂存区; commit 提交到本地仓库；push 到远程仓库；

注意: 在企业工作工程中，我们要经常性执行 git pull 命令, 作用；不断的同步远程最新代码到本地仓库；
     理由：1.远程仓库是所有开发人员都在提交代码一个中央存储仓库；
          2.不经常性的pull, 会导致本地仓库代码与远程仓库存在较大的差异；代码冲突的概率非常之大；
          3.经常性pull；可以最大化的避免因为协同开发，导致代码冲突而影响自己去提交代码；耽误工期；
          4.pull不能够百分百的避免代码冲突；只是尽可能的去避免；
```

#### 6.代码冲突

* 导致原因: 多人同时在修改同一个 helloword.java 文件时, 其他人先提交了该文件后，导致你手中的代码和远程仓库最新代码不同步，所以git 不会允许你去提交；
* 解决：
  - 将自己手中的 helloword.java 备份一份后；将工作空间中该文件删除；然后从远程pull拉取最新的helloword.java后，基于刚才备份的文件在作出修改，如果在你调整的过程中，又有人在你提交前，提交了该文件；你还是要重复上述动作，继续备份（都是同事，不要骂娘；
  - 利用idea提供的功能可以得到很好的图形化界面进行冲突的解决；

**小窍门**: 

* 如果代码编写完毕，测试无误，请及时提交到远程仓库；这样即使存在版本冲突，后提交得人要受罪；
* 每次修改代码时，一定要反复的去pull最新的代码；
* 烧香拜佛，好的项目管理，不会经常性存在多个人去操作同一个文件；好的领导也会避免此类事情的发生；
* 代码冲突时，不要光想着reset进行代码的回退, 虽然可以解决一般情况；在实际工作中，你会发现回退后冲突的文件更多；

#### 7.GIt客户端工具

* sourceTree
* TortoiseGit
* 自带命令行窗口
* idea

**说明**:  

* 所有的图形化客户端工具底层都是在执行上述Git命令
* 熟悉命令的基本操作后，在玩转各种客户端工具，都大同小异；
* 领命不要可以背；能够借助工具也可以更好的完成工作；
* idea中的Git图形化操作，更被java程序员所接受；擅长应用一种工具即可；

#### 扩展-push时过滤文件

**说明**: 再项目会存在很多.idea 和 其他 与代码不相关的文件, 是不需要push到远程仓库的，因为没人开发人员的电脑环境都不同，如果提交了，可能会导致其他开发人员因为idea 版本不同，而导致项目存在错误；

.gitignore 文件（PS: 改文件放在.git 隐藏文件同级目录）

```
# 注释内容

# IDEA
*.ipr
*.iws
*.iml

.idea
logs

# Module rootProject
/build
/out
/classes

# Compiled class file
*.class

# Log file
*.log

# Package Files #
*.jar
*.war
*.nar
*.ear
*.zip
*.tar.gz
*.rar

/target
/.settings
/logs
```

